> 关于时间限制与复杂度

在竞赛中，我们认为计算机一秒能执行 $5 \times 10^8$ 次计算（卡常卡的好可以到$10^9$），如果题目给出的时间限制为 1s，那么算法执行的计算次数最多应该在 $10^8$ 量级才有可能解决这个问题。也有说$10^7$到$10^8$之间。

- $O(n)$ 的算法能解决的数据范围在 $n \leq 10^8$。
- $O(n \log n)$ 的算法能解决的数据范围在 $n \leq 10^6$ 
  - 此时每个数据的输入读取不要用cin，用scanf

- $O(n \sqrt{n})$ 的算法能解决的数据范围在 $n \leq 10^5$。
- $O(n^2)$ 的算法能解决的数据范围在 $n \leq 5000$。
- $O(n^3)$ 的算法能解决的数据范围在 $n \leq 300$。
- $O(2^n)$ 的算法能解决的数据范围在 $n \leq 25$。
- $O(n!)$ 的算法能解决的数据范围在 $n \leq 11$。

以上范围仅供参考，实际中还要考虑每种算法的常数。



## 第1章 动态规划

### 1 走格子

数字三角形

K取方格数


### 2 最长上升子序列 LIS

基本：朴素dp O(n^2)，贪心二分 O(nlogn)  [leetcode题解](https://leetcode.cn/problems/longest-increasing-subsequence/solutions/147667/zui-chang-shang-sheng-zi-xu-lie-by-leetcode-soluti/) 

```
LIS
`--- 1017 出现双向
|	   `--- 1014
| 			  `--- 482
`--- 1012 抽象一些
`--- 1016 状态修改为：序列之最大和
`--- 1010 带贪心
|	   `--- 187 带DFS暴搜
`--- 272  带LCS
```

#### 1017. 怪盗基德的滑翔翼

出现双向的LIS，不过这题可以简单化解

- 选完起始点 `i` 和方向后，即为以 `a[i]` 结尾的LIS；因而正向和方向各做一遍LIS即可得解
- 多组数据读取

#### 1014. 登山

单次彻底的双向，变为最长”单峰“子序列

- `dp[i]`定峰值，向两侧做LIS并加起来

#### 482. 合唱队形 (NOIP 2004)

最少同学出列，即最多同学成目标队形，即最长单峰子序列，所以同1014

---

#### 1012. 友好城市

一侧按坐标排序后，另一侧做LIS即可

- 结构体排序，二维两个int可使用pair

  ```cpp
  typedef pair<int, int> PII;
  PII q[N];
  
  sort(q, q + N);
  ```

- LIS算法的选择：如何看数据范围，5000可以dp，100000可能就得贪心二分

  - 1亿 10^9 次大概在超时的边界

---

#### 1016. 最大上升子序列和

记录的状态改为和的最大值即可

- 3662，这道题显然不能简单dp，优化 TODO
  - 单调栈+二分（会是从LIS贪心二分修改而来的吗）
  - 离散化、线段树、树状数组、平衡树等数据结构（前缀中的最大值 $\to$ 线段树、树状数组）

---

#### 1010. 拦截导弹

第一问即LIS，第二问要求用最少的LIS覆盖全序列（贪心）

- 贪心过程：从前向后扫描每个数
  - 若现有子序列的结尾都小于当前数，则需要创建新子序列
  - 反之，则将当前数放到 **结尾大于它的子序列** 中 **结尾最小的子序列** （启发式理由：尽可能使子序列的结尾大，这样可接更多的）
- 贪心证明：当前贪心算法记为A，最优算法记为OPT
  - 首先必然有OPT $\leq$ A
  - 对于每个不一样的地方，可以调整A的接法为OPT(不断交换后缀)而不使子序列数增加，所以有OPT$\geq$A （调整法）
  - 所以得证
- 所以做法就暗合LIS的贪心二分解法 ：可发现对偶问题

最少用多少个**最长非下降子序列**覆盖（宽度） $\iff$ 最长**上升子序列**长度 【对偶问题】

**反链定理**: Dilworth定理，集合划分为数目最少的链来量化地描述任何有限偏序集的**宽度**

- 包含元素最多反链的元素数 等于 包含链数最少的链分解的链数

按行读取，非定长的数：`stringstream`,  `while(cin>>xx)`

(洛谷的P1020)

```
输入: 3 4 5 4 5 2 1

直观看：对于上升子序列（每个序列单增）
3 4 5
4 5
2
1
记录上升子序列末尾的数组成数组，则为单调非增
5 5 2 1
```

#### 187. 导弹防御系统

增加选择：系统拦截的导弹可以选择单增或单减。即最少的LIS/LDS覆盖全序列

所以只能进行暴力枚举，DFS搜索，n长度序列则复杂度$O(2^n)$；看题目数据范围，n<50, 则为$1024^5 = 10^{15}$

- 决策问题：集合归类 dp，无法归类 暴搜
- DFS求最小步数（BFS本身就有最短路的性质，但是DFS没有，需要间接利用）
  - 全局记录最小值，不断更新
  - 迭代加深
- 不用BFS的原因
  - 空间容易爆炸，因为要存每一层的内容；此题的状态太大(所有上升/下降子序列)，不好存储
  - 不容易剪枝
- 读入的写法 `while(cin >> n, n)` 表示为0时就不循环了

---

#### 272. 最长公共上升子序列

最长公共子序列LCS + 最长上升子序列LIS

- 最长公共子序列：6017,  3510, 2694

- 最长公共子串

dp状态就以在LCS为基，再增加上升的性质：

- `dp[i][j]`： 【集合】所有由第一个序列前`i`个字母，第二个序列前`j`个字母构成的，且以`b[j]`结尾的 公共上升子序列；【属性】取max长度
- 状态计算：理论分析后，复杂度是$O(n^3)$，可以实现，但是代码需要优化
- 代码优化：对代码进行等价变形



### 3 背包问题

[本质] **组合类dp**  vs  LIS的**序列dp**

背包9问

```
				     二进制 ---> 多重背包II
						  /
01背包 --> 完全背包 ---> 多重背包I 
  |						  \
  |				    单调队列 ---> 多重背包III <--- 154.滑动窗口(求最值) <--- 单调队列
  |
  `---> 分组背包
  |		   `---> 有依赖背包（树形dp）
  |
  `---> 混合背包 (01 + 完全 + 多重I)
  |
  |
  `---> 二维费用的背包问题
  |
  |
  `---> 求具体方案 / 求方案数
```



```
01背包
 `--> 423.采药: 纯01背包
 `--> 426.开心的金明：纯01背包
 `--> 1024.装箱问题：小转化，体积就是价值
 `--> 278.数字组合：求方案数
 `--> 734.能量石（+贪心）
完全背包
 `--> 1023.买书：求方案数
 `--> 1021.货币系统:n种面值货币组成m，1371可替，还是求方案数
 `--> 532.货币系统NOIP 2018：类似线性代数推导性质
多重背包
 `--> 1019.庆功会：多重背包I
二维费用背包
 `--> 1022.宠物小精灵：阅读理解，作用于 01背包
 `--> 1020.浅水员：作用于 01背包
分组背包
 `--> 1013.机器分配: 洛谷P2066
 `--> 487.金明的预算方案
有依赖的背包
 `--> 选课
```

