## 第1章 动态规划

### 1 走格子

数字三角形

K取方格数


### 2 最长上升子序列 LIS

基本：朴素dp O(n^2)，贪心二分 O(nlogn)  [leetcode题解](https://leetcode.cn/problems/longest-increasing-subsequence/solutions/147667/zui-chang-shang-sheng-zi-xu-lie-by-leetcode-soluti/) 

```
LIS
`--- 1017 出现双向
|	   `--- 1014
| 			  `--- 482
`--- 1012 抽象一些
`--- 1016 状态修改为：序列之最大和
`--- 1010 带贪心
|	   `--- 187 带DFS暴搜
`--- 272  带LCS
```

#### 1017. 怪盗基德的滑翔翼

出现双向的LIS，不过这题可以简单化解

- 选完起始点 `i` 和方向后，即为以 `a[i]` 结尾的LIS；因而正向和方向各做一遍LIS即可得解
- 多组数据读取

#### 1014. 登山

单次彻底的双向，变为最长”单峰“子序列

- `dp[i]`定峰值，向两侧做LIS并加起来

#### 482. 合唱队形 (NOIP 2004)

最少同学出列，即最多同学成目标队形，即最长单峰子序列，所以同1014

---

#### 1012. 友好城市

一侧按坐标排序后，另一侧做LIS即可

- 结构体排序，二维两个int可使用pair

  ```cpp
  typedef pair<int, int> PII;
  PII q[N];
  
  sort(q, q + N);
  ```

- LIS算法的选择：如何看数据范围，5000可以dp，100000可能就得贪心二分

  - 1亿 10^9 次大概在超时的边界

---

#### 1016. 最大上升子序列和

记录的状态改为和的最大值即可

- 3662，这道题显然不能简单dp，优化 TODO
  - 单调栈+二分（会是从LIS贪心二分修改而来的吗）
  - 离散化、线段树、树状数组、平衡树等数据结构（前缀中的最大值 $\to$ 线段树、树状数组）

---

#### 1010. 拦截导弹

第一问即LIS，第二问要求用最少的LIS覆盖全序列（贪心）

- 贪心过程：从前向后扫描每个数
  - 若现有子序列的结尾都小于当前数，则需要创建新子序列
  - 反之，则将当前数放到 **结尾大于它的子序列** 中 **结尾最小的子序列** （启发式理由：尽可能使子序列的结尾大，这样可接更多的）
- 贪心证明：当前贪心算法记为A，最优算法记为OPT
  - 首先必然有OPT $\leq$ A
  - 对于每个不一样的地方，可以调整A的接法为OPT(不断交换后缀)而不使子序列数增加，所以有OPT$\geq$A （调整法）
  - 所以得证
- 所以做法就暗合LIS的贪心二分解法 ：可发现对偶问题

最少用多少个**最长非下降子序列**覆盖（宽度） $\iff$ 最长**上升子序列**长度 【对偶问题】

**反链定理**: Dilworth定理，集合划分为数目最少的链来量化地描述任何有限偏序集的**宽度**

- 包含元素最多反链的元素数 等于 包含链数最少的链分解的链数

按行读取，非定长的数：`stringstream`,  `while(cin>>xx)`

(洛谷的P1020)

